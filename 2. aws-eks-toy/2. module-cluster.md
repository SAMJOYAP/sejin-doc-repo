# Cluster 모듈 설명

---

## 1) 모듈 역할

- EKS 클러스터와 관리형 노드 그룹을 생성한다.
- IRSA(OIDC)를 활성화해 서비스 계정 기반 IAM 연동을 준비한다.
- 기본 스토리지 애드온(ebs-csi-driver)을 활성화한다.
- CloudWatch 로그 그룹 생성 여부를 제어한다.

---

## 2) .tf 파일 구성

### main.tf

- `terraform-aws-modules/eks/aws`로 EKS 클러스터를 구성한다.
- 퍼블릭 엔드포인트 접근 CIDR을 제한한다.
- 관리형 노드 그룹(인스턴스 타입/스케일)을 정의한다.
- `aws-ebs-csi-driver` 애드온을 추가한다.

### variables.tf

- `cluster_name`, `cluster_version`: 클러스터 이름/버전.
- `cluster_public_access_cidrs`: API 서버 접근 허용 CIDR.
- `vpc_id`, `subnet_ids`: 클러스터 네트워크 대상.
- `node_*`: 노드 그룹 스펙(인스턴스 타입/스케일).
- `create_cloudwatch_log_group`: 로그 그룹 생성 여부.

### outputs.tf

- `cluster_name`: 다른 모듈에서 참조하는 클러스터 이름.
- `cluster_endpoint`: kubeconfig/접속에 사용하는 API endpoint.
- `oidc_provider_arn`: IRSA 구성에 필요한 OIDC ARN.

---

# 빠른 요약

- EKS 클러스터 + 관리형 노드 그룹을 만든다.
- IRSA와 기본 스토리지 애드온을 활성화한다.
- 클러스터 정보(이름/endpoint/OIDC)를 출력으로 제공한다.

---
